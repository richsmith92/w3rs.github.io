<!DOCTYPE html>
<!-- saved from url=(0041)https://dchest.github.io/scrypt-async-js/ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Brainwallet HD</title>
  <style>
    html,
    body {
      font-family: sans-serif;
    }

    #out {
      margin-top: 10px;
      padding: 10px 5px;
      color: #444;
      line-height: 1.5;
    }

    #out small {
      padding: 5px;
      background-color: #eee;
    }

    #N {
      margin-left: 10px;
      color: #aaa;
    }
  </style>
<style></style></head>

<body>
  <h1>Brainwallet HD</h1>
  <form>
    <p>
      <label for="password">Unique passphrase:</label>
      <br />
      <input id="password" name="password" type="text" value="" size="100">
    </p>
    <p>
      <label for="salt">Salt (your email):</label>
      <br />
      <input id="salt" name="salt" type="text" value="" size="50">
    </p>
    <!-- <p>
      <label for="interruptStep">interruptStep:</label>
      <input id="interruptStep" name="interruptStep" type="text" value="0" size="8">
    </p> -->
    <!-- <p>
      <label for="logN">logN:</label>
      <input id="logN" name="logN" type="text" value="19" size="4" onkeypress="updateN()" onkeyup="updateN()" onblur="updateN()" onchange="updateN()">
      <label for="r">r:</label>
      <input id="r" name="r" type="text" value="8" size="4">
      <label for="p">p:</label>
      <input id="p" name="p" type="text" value="1" size="4">
      <span id="N">N = 2048</span>
    </p> -->
    <!-- <p>
      <label for="encoding">Encoding:</label>
      <select id="encoding" name="encoding">
        <option value="hex" selected="">hex</option>
        <option value="base64">base64</option>
        <option value="binary">binary</option>
      </select>
    </p> -->
</form>
<button id="calculate" onclick="calculate()">Calculate</button>
<div id="out"></div>

<script src="./scrypt-async.js"></script>
<script src="./bip39.js"></script>
<script>


var f = document.forms[0];

// function updateN() {
//   var fN = document.querySelector('#N');
//   var logN = f.logN.value;
//   fN.innerHTML = 'N = ' + Math.pow(2, logN);
// }

var getTime = (function () {
    if (typeof performance !== "undefined") {
        return performance.now.bind(performance);
    }
    return Date.now.bind(Date);
})();

function calculate() {

  var btn = document.querySelector('#calculate')
  var out = document.querySelector('#out');

  var password = f.password.value;
  var salt = f.salt.value;
  // var interruptStep = f.interruptStep.value;
  // var logN = f.logN.value;
  // var r = f.r.value;
  // var p = f.p.value;
  // var encoding = 'hex';

  btn.disabled = true;
  btn.innerHTML = 'Wait...';

  window.setTimeout(function() {
    try {
      var t1 = getTime();
      scrypt(password, salt, {
          // logN: logN,
          // r: r,
          // p: p,
          logN: 19,
          r: 8,
          p: 1,
          dkLen: 16,
          interruptStep: 0,
          encoding: 'hex'
      },
      function(res) {
        var t2 = getTime() - t1;
        var mnemonic = bip39.entropyToMnemonic(res)
        out.innerHTML = 'Time: ' + Math.round(t2) + ' ms<br />' +
          'Entropy: ' + res + '<br />' +
          'BIP39 Mnemonic:<br /><b>' + mnemonic + '</b>'
          ;
        btn.disabled = false;
        btn.innerHTML = 'Calculate';
      });
    } catch(ex) {
        out.innerHTML = '<span style="color:red">error: ' + ex.message + '</span>';
        btn.disabled = false;
        btn.innerHTML = 'Calculate';
    }
  });
}

// updateN();
</script>



</body>
</html>
